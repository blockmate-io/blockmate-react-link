{"version":3,"file":"index.modern.js","sources":["../src/index.js"],"sourcesContent":["export const handleOpen = () => {\n  window.parent.postMessage({ type: EVENT_MESSAGES.open }, '*')\n}\n\nexport const handleClose = (url) => {\n  window.parent.postMessage({ type: EVENT_MESSAGES.close, url }, '*')\n}\n\nconst EVENT_MESSAGES = {\n  open: 'blockmate-iframe-open',\n  close: 'blockmate-iframe-close'\n}\n\nexport const LinkModal = ({ jwt, url = 'https://link-dev.blockmate.io' }) => {\n  if (!jwt) return null\n\n  const body = document.querySelector('body')\n\n  const iframeStyle =\n    'display:block; position:fixed; width:500px; height:500px; z-index:100; border:none; top:0; right:0'\n\n  const createIframe = () => {\n    const iframe = document.createElement('iframe')\n    iframe.setAttribute('src', `${url}/?jwt=${jwt}`)\n    iframe.setAttribute('style', iframeStyle)\n    iframe.setAttribute('id', 'link-iframe')\n    body.appendChild(iframe)\n  }\n\n  const removeIframe = (event) => {\n    const iframe = document.querySelector('#link-iframe')\n    body.removeChild(iframe)\n    if (event.data.url) {\n      window.location = event.data.url\n    }\n  }\n\n  window.onmessage = function (event) {\n    if (event?.data?.type === EVENT_MESSAGES.close) {\n      removeIframe(event)\n    }\n    if (event?.data?.type === EVENT_MESSAGES.open) {\n      createIframe()\n    }\n  }\n\n  return null\n}\n"],"names":["handleOpen","window","parent","postMessage","type","EVENT_MESSAGES","open","handleClose","url","close","LinkModal","jwt","body","document","querySelector","iframeStyle","createIframe","iframe","createElement","setAttribute","appendChild","removeIframe","event","removeChild","data","location","onmessage"],"mappings":"IAAaA,UAAU,GAAG,SAAbA,UAAU,GAAS;EAC9BC,MAAM,CAACC,MAAM,CAACC,WAAW,CAAC;IAAEC,IAAI,EAAEC,cAAc,CAACC;GAAM,EAAE,GAAG,CAAC;AAC/D;IAEaC,WAAW,GAAG,SAAdA,WAAW,CAAIC,GAAG,EAAK;EAClCP,MAAM,CAACC,MAAM,CAACC,WAAW,CAAC;IAAEC,IAAI,EAAEC,cAAc,CAACI,KAAK;IAAED,GAAG,EAAHA;GAAK,EAAE,GAAG,CAAC;AACrE;AAEA,IAAMH,cAAc,GAAG;EACrBC,IAAI,EAAE,uBAAuB;EAC7BG,KAAK,EAAE;AACT,CAAC;IAEYC,SAAS,GAAG,SAAZA,SAAS,OAAuD;EAAA,IAAjDC,GAAG,QAAHA,GAAG;IAAA,gBAAEH,GAAG;IAAHA,GAAG,yBAAG,+BAA+B;EACpE,IAAI,CAACG,GAAG,EAAE,OAAO,IAAI;EAErB,IAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;EAE3C,IAAMC,WAAW,GACf,oGAAoG;EAEtG,IAAMC,YAAY,GAAG,SAAfA,YAAY,GAAS;IACzB,IAAMC,MAAM,GAAGJ,QAAQ,CAACK,aAAa,CAAC,QAAQ,CAAC;IAC/CD,MAAM,CAACE,YAAY,CAAC,KAAK,EAAKX,GAAG,cAASG,GAAG,CAAG;IAChDM,MAAM,CAACE,YAAY,CAAC,OAAO,EAAEJ,WAAW,CAAC;IACzCE,MAAM,CAACE,YAAY,CAAC,IAAI,EAAE,aAAa,CAAC;IACxCP,IAAI,CAACQ,WAAW,CAACH,MAAM,CAAC;GACzB;EAED,IAAMI,YAAY,GAAG,SAAfA,YAAY,CAAIC,KAAK,EAAK;IAC9B,IAAML,MAAM,GAAGJ,QAAQ,CAACC,aAAa,CAAC,cAAc,CAAC;IACrDF,IAAI,CAACW,WAAW,CAACN,MAAM,CAAC;IACxB,IAAIK,KAAK,CAACE,IAAI,CAAChB,GAAG,EAAE;MAClBP,MAAM,CAACwB,QAAQ,GAAGH,KAAK,CAACE,IAAI,CAAChB,GAAG;;GAEnC;EAEDP,MAAM,CAACyB,SAAS,GAAG,UAAUJ,KAAK,EAAE;IAAA;IAClC,IAAI,CAAAA,KAAK,aAALA,KAAK,sCAALA,KAAK,CAAEE,IAAI,gDAAX,YAAapB,IAAI,MAAKC,cAAc,CAACI,KAAK,EAAE;MAC9CY,YAAY,CAACC,KAAK,CAAC;;IAErB,IAAI,CAAAA,KAAK,aAALA,KAAK,uCAALA,KAAK,CAAEE,IAAI,iDAAX,aAAapB,IAAI,MAAKC,cAAc,CAACC,IAAI,EAAE;MAC7CU,YAAY,EAAE;;GAEjB;EAED,OAAO,IAAI;AACb;;;;"}